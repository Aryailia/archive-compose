(function(){"use strict";function t(t,e,n){return"object"==typeof t&&t.hasOwnProperty(e)?t[e]:n}function e(t){return new Array(void 0==t?0:t)}function n(t,e,n){var r=n.length;return e<r&&-e-1<r&&(t.push(n[(e%r+r)%r]),!0)}function r(r,o){var u=Object.create(S);return u.__wrapped__=r,u.__getter__=t(o,"getter",n),u.__setter__=t(o,"setter",j),u.__new__=t(o,"newObj",e),u.__functor__=u.__getter__,O&&(u.__index__=-1,u[Symbol.iterator]=function(){return u}),u}function o(t,e,n){var r=Object.create(null);return r.thunk=t.__functor__,r.index=0,t.__functor__=function(t,o,u){return n(e,t,o,u,r)},r}function u(t,e,n){for(var r=-1;t(e,++r,n););}function i(t,e,n,r,o){return!!o.thunk(e,n,r)&&(e[0]=t(e[0],n),!0)}function f(t,e,n,r,o){var u,i=n<0?-1:1;0==o.index&&n<0&&(o.index-=1);do{if(!o.thunk(e,o.index,r))return!1;(u=t(e[0],o.index))||e.pop(),o.index+=i}while(!u);return!0}function c(t,e,n,r,o){var u=n<0,i=o.memoized,f=u?-n-1:n;if(f>=i.length){if(!o.thunk(e,u?--o.index:o.index++,r))return!1;a(e.pop(),t,u,i)}return e[0]=i[f],!0}function a(t,e,n,r){var o=t.length,u=n?o:-1;if(e>0&&s(t))if(e>1)for(;n?u--:++u<o;)a(t[u],e-1,n,r);else j(r,t,n);else r.push(t);return r}function s(t){return void 0!==t.length}function h(t,e,n,r,o){var u=-1;if(0==o.index++){for(;o.thunk(e,++u,r);)o.accumulator=t(o.accumulator,e.pop(),u);return e[0]=o.accumulator,!0}return!1}function _(t,e,n,r,o){return n>=0?p(t,e,n,r,o):l(t,e,n,r,o)}function p(t,e,n,r,o){for(var u,i=[];o.thunk(e,o.index,r)&&(u=e.pop(),i.push(u),!t(u,o.index++)););return i.length>0&&(e[0]=i),i.length>0}function l(t,e,r,o,u){if(0===u.index)for(u.memoized=[];p(t,e,0,o,u);)u.memoized.push(e.pop());return n(e,r,u.memoized)}function m(t,e,n,r,o){return!!o.thunk(e,n,r)&&(t(e[0],n),!0)}function d(t,e,n,r,o){return o.thunk(e,-n-1,r)}function y(t,e,r,o,i){return 0==i.index++&&(u(i.thunk,i.memoized,o),i.search(i.memoized,t),console.log(i.memoized)),n(e,r,i.memoized)}function x(t,e){return t.sort(e)}function b(t,e){for(var n=1;n<t.length;){for(var r=0;r+n<t.length;)g(t,r,n,e),r+=2*n;n*=2}}function g(t,e,n,r){for(var o=e-1,u=e+n,i=Math.min(u+n-1,t.length-1),f=e,c=u,a=new Array(i+1);++o<=i;)r([f],t[c])>0||c>i&&f<u?(a[o]=t[f],++f):(a[o]=t[c],++c);for(o=e-1;++o<=i;)t[o]=a[o]}function w(t,e){for(var n,r,o=0,u=t.length;++o<u;)for(n=o;e(t[n-1],t[n])>0;)r=t[n-1],t[n-1]=t[n],t[n]=r,--n}function v(t,e,n,r,o){return++o.index<=t&&o.thunk(e,n,r)}function k(t,e,n,r,o){var u=-1,i=[],f=o.thunk(e,n,r);for(i.push(e.pop());++u<t.length;)f=t[u].__getter__(e,n,t[u].__wrapped__)||f,i.push(e.pop());return!!f&&(e[0]=i,!0)}function j(t,e,n){for(var r=t.length,o=e.length-1,u=-1;++u<=o;)t[u+r]=e[n?o-u:u];return t}var O="function"==typeof Symbol&&"symbol"==typeof Symbol(),S={};r.shallowAssign=function(t,e){for(var n,r,o,u=0,i=Object.getOwnPropertySymbols||!1;++u<arguments.length;)for(n=arguments[u],r=Object.getOwnPropertyNames(n).concat(i?i(n):[]),o=-1;++o<r.length;)Object.defineProperty(t,r[o],Object.getOwnPropertyDescriptor(n,r[o]));return t},r.range=function(t,e,n){switch(arguments.length){case 1:e=t,t=0;case 2:n=1;case 3:break;case 0:default:throw new SyntaxError("Expected 1-3 arguments.")}for(var r=-1,o=Math.max(Math.ceil((e-t)/n),0),u=new Array(o);o--;)u[++r]=t,t+=n;return u},S.next=function(){var t=[];return this.__functor__(t,++this.__index__,this.__wrapped__)?{value:t}:(this.__functor__=this.__getter__,this.__index__=-1,{done:!0})},S.seq=function(){for(var t,e=this.__functor__,n=[],r=-1;e(t=[],++r,this.__wrapped__);)j(n,t);return this.__wrapped__=n,this.__functor__=this.__getter__,this},S.value=function(){return this.seq().__wrapped__},r.map=function(t,e){for(var n=-1,r=e.length,o=new Array(r);++n<r;)o[n]=t(e[n],n,e);return o},S.map=function(t){if("function"!=typeof t)throw new SyntaxError("map: expects a function");return o(this,t,i),this},r.filter=function(t,e){for(var n=-1,r=-1,o=e.length,u=[];++n<o;)t(e[n],n,e)&&(u[++r]=e[n]);return u},S.filter=function(t){if("function"!=typeof t)throw new SyntaxError("filter expects a function");return o(this,t,f),this},r.flatten=function(){},S.flatten=function(t){if("number"!=typeof t)throw new SyntaxError("flatten expects a number");return o(this,t,c).memoized=[],this},S.flattenDeep=function(){return o(this,1/0,c).memoized=[],this},r.reduce=function(t,e,n){for(var r=-1,o=n.length,u=e;++r<o;)u=t(u,n[r],r,n);return u},S.reduce=function(t,e){if("function"!=typeof t&&"number"!=typeof t)throw new SyntaxError("chunk expects a function or a number");return o(this,t,h).accumulator=e,this},r.chunk=function(t,e){},S.chunk=function(t){var e=typeof t;if("function"!==e&&"number"!==e)throw new SyntaxError("chunk expects a function or a number");return o(this,"number"===e?function(e,n){return(n+1)%t==0}:t,_),this},r.foreach=function(){},S.foreach=function(t){if("function"!=typeof t)throw new SyntaxError("map: expects a function");return o(this,t,m),this},r.reverse=function(t){var e=t.length-1;return r.map(function(n,r){return t[e-r]},t)},S.reverse=function(){return o(this,0,d),this},S.sort=function(t,e){if("function"!=typeof t||"string"!=typeof e)throw new SyntaxError("sort: expects a function and a string");var n=o(this,t,y);switch(e){case"unstable":n.search=x;break;case"stableMerge":n.search=b;break;case"stableInsert":n.search=w;break;default:throw new SyntaxError("sort: invalid {searchType}")}return n.memoized=[],this},S.take=function(t){if("number"!=typeof t)throw new SyntaxError("take: expects a number");return o(this,t,v),this},r.zip=function(){},S.zip=function(){var t=this.__getter__;return o(this,r.map(function(e){return r(e,{getter:t})},arguments),k),this};var z="object"==typeof global&&global&&global.Object===Object&&global,E="object"==typeof self&&self&&self.Object===Object&&self,A=z||E||Function("return this")(),P="object"==typeof exports&&exports&&!exports.nodeType&&exports&&"object"==typeof module&&module&&!module.nodeType&&module;"function"==typeof define&&"object"==typeof define.amd&&define.amd?(A.Compose=r,A.$=r):P?P.exports=r:(A.Compose=r,A.$=r)}).call(this);